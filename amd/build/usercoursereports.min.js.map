{"version":3,"file":"usercoursereports.min.js","sources":["../src/usercoursereports.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module for User Course Reports filter + AJAX call\n *\n * @copyright  2025 https://santoshmagar.com.np/\n * @author     santoshtmp7\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax'], function ($, Ajax) {\n\n    var filter_area_id = 'report-usercoursereports-filter-area';\n    /**\n     *\n     * @param {*} formquerystring\n     */\n    function get_filter_report_table(formquerystring) {\n        // Call Moodle WebService via core/ajax\n        const request = {\n            methodname: 'report_usercoursereports_get_report_table',\n            args: {\n                querystring: formquerystring,\n            }\n        };\n        const ajaxrequest = Ajax.call([request])[0];\n        ajaxrequest.done(function (response) {\n            window.console.log(response);\n            if (response && response.reporttable) {\n                $('#' + filter_area_id).replaceWith(response.reporttable);\n            } else {\n                $('#' + filter_area_id).html('<div class=\"alert alert-warning\">No data found</div>');\n            }\n        });\n        ajaxrequest.fail(function (response) {\n            window.console.log(response);\n        });\n        ajaxrequest.always(function () {\n        });\n    }\n\n    return {\n        init: function () {\n\n            // Remove .col-md-3 and .col-md-9 from divs inside .usercoursereports-filter-field\n            $('.usercoursereports-filter-field div.col-md-3, .usercoursereports-filter-field div.col-md-9').each(function () {\n                $(this).removeClass('col-md-3 col-md-9');\n            });\n\n            // On form submit\n            $('#usercoursereports-filter').on('submit', function (e) {\n                e.preventDefault();\n                const formquerystring = $(this).serialize();\n                get_filter_report_table(formquerystring);\n            });\n            // Pagination.\n            $(document).on('click', '#' + filter_area_id + ' nav.pagination a.page-link', function (e) {\n                e.preventDefault();\n                const formquerystring = $(this).attr('href').split('?')[1];\n                get_filter_report_table(formquerystring);\n            });\n\n        }\n    };\n});\n"],"names":["define","$","Ajax","filter_area_id","get_filter_report_table","formquerystring","request","methodname","args","querystring","ajaxrequest","call","done","response","window","console","log","reporttable","replaceWith","html","fail","always","init","each","this","removeClass","on","e","preventDefault","serialize","document","attr","split"],"mappings":";;;;;;;AAuBAA,oDAAO,CAAC,SAAU,cAAc,SAAUC,EAAGC,UAErCC,eAAiB,gDAKZC,wBAAwBC,uBAEvBC,QAAU,CACZC,WAAY,4CACZC,KAAM,CACFC,YAAaJ,kBAGfK,YAAcR,KAAKS,KAAK,CAACL,UAAU,GACzCI,YAAYE,MAAK,SAAUC,UACvBC,OAAOC,QAAQC,IAAIH,UACfA,UAAYA,SAASI,YACrBhB,EAAE,IAAME,gBAAgBe,YAAYL,SAASI,aAE7ChB,EAAE,IAAME,gBAAgBgB,KAAK,2DAGrCT,YAAYU,MAAK,SAAUP,UACvBC,OAAOC,QAAQC,IAAIH,aAEvBH,YAAYW,QAAO,qBAIhB,CACHC,KAAM,WAGFrB,EAAE,8FAA8FsB,MAAK,WACjGtB,EAAEuB,MAAMC,YAAY,wBAIxBxB,EAAE,6BAA6ByB,GAAG,UAAU,SAAUC,GAClDA,EAAEC,iBAEFxB,wBADwBH,EAAEuB,MAAMK,gBAIpC5B,EAAE6B,UAAUJ,GAAG,QAAS,IAAMvB,eAAiB,+BAA+B,SAAUwB,GACpFA,EAAEC,iBAEFxB,wBADwBH,EAAEuB,MAAMO,KAAK,QAAQC,MAAM,KAAK"}